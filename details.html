<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Model Details</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="details.css">
    <script>
        $(function () {
            // Function to parse URL parameters
            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            // Function to display car images in carousel
            function displayCarImages(modelName) {
                const basePath = 'images/'; // Adjust if your images folder is located differently
                const sanitizedModelName = modelName.replace(/\s+/g, '-').toLowerCase();

                for (let i = 1; i <= 5; i++) {
                    const imgSrc = `${basePath}${sanitizedModelName}-${i}.jpg`;
                    a.push(imgSrc);

                    // Create carousel item
                    const imgTag = $('<img>').addClass('d-block mx-1 w-100').attr('src', imgSrc).attr('alt', `${modelName} Image ${i}`).attr('height', '500rem');
                    const carouselItem = $('<div>').addClass('carousel-item').append(imgTag);
                    if (i === 1) {
                        carouselItem.addClass('active'); // Make the first item active
                    }

                    // Append carousel item to carousel inner
                    $('#carouselInner').append(carouselItem);
                }
            }

            // Function to fetch car details and display them
            function fetchCarDetails(model) {
                if (model) {
                    // Update the API URL based on the model name from URL parameter
                    const carQueryApiUrl = `https://www.carqueryapi.com/api/0.3/?callback=?&cmd=getTrims&make=rolls-royce&model=${encodeURIComponent(model)}`;
                    $.getJSON(carQueryApiUrl, function (data) {
                        if (data.Trims.length > 0) {
                            const details = data.Trims[0]; // Assuming you want the first trim result
                            $('#modelName').text(`${details.model_name}`);
                            $('#modelYear').text(`${details.model_year}`);
                            $('#engineType').text(`${details.model_engine_type}`);
                            $('#enginePowerRPM').text(`${details.model_engine_power_rpm}`);
                            $('#engineTorqueRPM').text(`${details.model_engine_torque_rpm}`);
                            $('#engineStrokeMM').text(`${details.model_engine_stroke_mm}`);
                            $('#engineFuel').text(`${details.model_engine_fuel}`);
                            $('#modelDrive').text(`${details.model_drive}`);
                            $('#transmissionType').text(`${details.model_transmission_type}`);
                            $('#modelDoors').text(`${details.model_doors}`);
                            $('#modelWeightKG').text(`${details.model_weight_kg}`);
                            $('#modelLengthMM').text(`${details.model_length_mm}`);
                            $('#modelWidthMM').text(`${details.model_width_mm}`);
                            $('#modelHeightMM').text(`${details.model_height_mm}`);
                            $('#modelWheelbaseMM').text(`${details.model_wheelbase_mm}`);
                            $('#modelMakeDisplay').text(`${details.model_make_display}`);
                            $('#modelMakeCountry').text(`${details.make_country}`);
                        }
                    });

                }
            }
            // Fetch car details based on the model parameter
            const model = getQueryParam('model');
            fetchCarDetails(model);
            displayCarImages(model);
        });

        let a = [];
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <div class="container">
            <!-- Navbar brand or logo -->
            <a class="navbar-brand" href="#"><img src="logo.jpeg" alt="Logo"></a>

            <!-- Toggler button for mobile view -->
            <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto mr-5">
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="home.html"><i class="fas fa-home"></i> Home</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="Dealers.html"><i class="fas fa-store"></i> Dealers</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link active" href="models.html"><i class="fas fa-car"></i> Models</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="service.html"><i class="fas fa-tools"></i> Service</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="ContactUs.html"><i class="fas fa-envelope"></i> Contact Us</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="carImages" class="container-fluid">
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <div id="carouselInner" class="carousel-inner">
                <!-- Carousel items will be added dynamically here -->
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <div id="modelDetails">
        <!-- Car details will be shown here -->
        <table class="table table-info table-hover border border-3 border-dark">
            <tbody>
                <tr>
                    <th>Model: </th>
                    <td id="modelName"></td>
                </tr>
                <tr>
                    <th>Year: </th>
                    <td id="modelYear"></td>
                </tr>
                <tr>
                    <th>Engine Type: </th>
                    <td id="engineType"></td>
                </tr>
                <tr>
                    <th>Model Engine Power RPM: </th>
                    <td id="enginePowerRPM"></td>
                </tr>
                <tr>
                    <th>Model Engine Torque RPM: </th>
                    <td id="engineTorqueRPM"></td>
                </tr>
                <tr>
                    <th>Model Engine Stroke MM: </th>
                    <td id="engineStrokeMM"></td>
                </tr>
                <tr>
                    <th>Model Engine Fuel: </th>
                    <td id="engineFuel"></td>
                </tr>
                <tr>
                    <th>Model Drive: </th>
                    <td id="modelDrive"></td>
                </tr>
                <tr>
                    <th>Model Transmission Type: </th>
                    <td id="transmissionType"></td>
                </tr>
                <tr>
                    <th>Model Doors: </th>
                    <td id="modelDoors"></td>
                </tr>
                <tr>
                    <th>Model Weight in KG: </th>
                    <td id="modelWeightKG"></td>
                </tr>
                <tr>
                    <th>Model Length in MM: </th>
                    <td id="modelLengthMM"></td>
                </tr>
                <tr>
                    <th>Model Width in MM: </th>
                    <td id="modelWidthMM"></td>
                </tr>
                <tr>
                    <th>Model Height in MM: </th>
                    <td id="modelHeightMM"></td>
                </tr>
                <tr>
                    <th>Model WheelBase in MM: </th>
                    <td id="modelWheelbaseMM"></td>
                </tr>
                <tr>
                    <th>Model Make Display: </th>
                    <td id="modelMakeDisplay"></td>
                </tr>
                <tr>
                    <th>Model Make Country: </th>
                    <td id="modelMakeCountry"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- FOOTER -->
    <section class="footer">
        <div class="box-container">
            <div class="image-section">
                <img src="logo.jpeg" alt="Image Description">
            </div>
            <div class="box">
                <h3>Quick Links</h3>
                <a href="home.html"><i class="fas fa-arrow-right"></i> Home</a>
                <a href="Dealers.html"><i class="fas fa-arrow-right"></i> Dealers</a>
                <a href="models.html"><i class="fas fa-arrow-right"></i> Models</a>
                <a href="service.html"><i class="fas fa-arrow-right"></i> Service</a>
                <a href="ContactUs.html"><i class="fas fa-arrow-right"></i> Contact Us</a>
            </div>

            <div class="box">
                <h3>Contact Info</h3>
                <a><i class="fas fa-phone"></i> +1 234 567 890</a>
                <a><i class="fas fa-envelope"></i> example@example.com</a>
                <a><i class="fas fa-map-marker-alt"></i> 123 Street, New York, USA</a>
            </div>

            <div class="box">
                <h3>Other Info</h3>
                <a><i class="fab fa-facebook-f"></i> Facebook</a>
                <a><i class="fab fa-twitter"></i> Twitter</a>
                <a><i class="fab fa-instagram"></i> Instagram</a>
            </div>
        </div>

        <div class="credit">Copyright @ 2024 by <span>XYZ</span> | All Rights Reserved!</div>
    </section>
</body>

</html>